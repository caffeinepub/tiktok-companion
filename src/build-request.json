{
  "kind": "build_request",
  "title": "Expand staff analytics dashboard with additional metrics",
  "projectName": "TikTok Companion",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-22",
      "text": "Add backend query methods to retrieve additional analytics metrics including total hashtags count, average videos per user, most used hashtags (top 5), and recent user activity (last 10 profile creations with timestamps)",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Add more"
        ]
      },
      "acceptanceCriteria": [
        "Backend exposes new query method(s) that return hashtag statistics",
        "Backend calculates and returns average videos per user metric",
        "Backend returns top 5 most used hashtags with usage counts",
        "Backend returns list of 10 most recent user profiles with creation timestamps",
        "All new query methods are restricted to admin/staff principals only"
      ]
    },
    {
      "id": "REQ-23",
      "text": "Expand the StaffAnalyticsPanel component to display the new metrics in visually distinct card sections including total hashtags, average videos per user, top 5 hashtags list with counts, and recent user activity timeline",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Add more"
        ]
      },
      "acceptanceCriteria": [
        "StaffAnalyticsPanel displays total hashtags count in a stat card",
        "Panel shows average videos per user rounded to 1 decimal place",
        "Top 5 hashtags are displayed in a ranked list with their usage counts",
        "Recent user activity shows the 10 newest users with formatted timestamps",
        "All new sections maintain the existing visual design style with consistent spacing and typography",
        "Loading and error states are handled for all new data queries"
      ]
    },
    {
      "id": "REQ-24",
      "text": "Create React Query hooks in useQueries.ts for fetching the new staff analytics data (hashtag stats, user averages, top hashtags, recent activity) that are only called when staff verification is active",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-5"
        ],
        "quotes": [
          "Add more"
        ]
      },
      "acceptanceCriteria": [
        "New custom hooks follow the existing useQueries.ts patterns",
        "Hooks properly handle loading, error, and success states",
        "Queries are disabled when actor is not available",
        "Data is properly typed with TypeScript interfaces"
      ]
    }
  ],
  "constraints": [
    "Do not modify frontend/src/hooks/useInternetIdentity.ts or frontend/src/hooks/useActor.ts",
    "Do not change the existing staff code verification logic (2807)",
    "Maintain single-actor architecture in backend/main.mo",
    "All new analytics queries must enforce admin/staff authorization",
    "Do not alter the existing color scheme or visual design patterns"
  ],
  "nonGoals": [
    "Adding export or download functionality for analytics data",
    "Implementing date range filters for analytics",
    "Creating interactive charts or graphs",
    "Adding real-time data updates or WebSocket connections",
    "Modifying existing analytics metrics or their calculation methods"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}